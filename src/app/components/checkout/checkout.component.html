<div class="max-w-2xl mx-auto p-4">
  <h1 class="text-2xl font-bold mb-6">Checkout</h1>

  <!-- Cart Summary Section -->
  <div class="bg-gray-50 p-4 rounded-lg mb-6">
    <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
    <div class="space-y-2">
      <ng-container *ngFor="let item of cartItems()">
        <div class="flex justify-between items-center">
          <span>{{ item.name }} (x{{ item.quantity }})</span>
          <span>${{ (item.price * item.quantity).toFixed(2) }}</span>
        </div>
      </ng-container>

      <div class="border-t pt-2 mt-2">
        <div class="flex justify-between">
          <span>Subtotal:</span>
          <span>${{ subtotal().toFixed(2) }}</span>
        </div>

        <ng-container *ngIf="discount() > 0">
          <div class="flex justify-between text-green-600">
            <span>Discount:</span>
            <span>-${{ discount().toFixed(2) }}</span>
          </div>
        </ng-container>

        <div class="flex justify-between font-bold mt-2">
          <span>Total:</span>
          <span>${{ cartTotal().toFixed(2) }}</span>
        </div>
      </div>
    </div>
  </div>

  <form [formGroup]="checkoutForm" (ngSubmit)="confirmOrder()">
    <div class="mb-8">
      <h2 class="text-xl font-semibold mb-4">Shipping Information</h2>
      <div class="space-y-4">
        <div>
          <label
            for="firstName"
            class="block text-sm font-medium text-gray-700"
          >
            First Name
          </label>
          <input
            id="firstName"
            type="text"
            formControlName="firstName"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="lastName" class="block text-sm font-medium text-gray-700">
            Last Name
          </label>
          <input
            id="lastName"
            type="text"
            formControlName="lastName"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700">
            Email
          </label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="address" class="block text-sm font-medium text-gray-700">
            Address
          </label>
          <input
            id="address"
            type="text"
            formControlName="address"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="city" class="block text-sm font-medium text-gray-700">
            City
          </label>
          <input
            id="city"
            type="text"
            formControlName="city"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="state" class="block text-sm font-medium text-gray-700">
            State
          </label>
          <input
            id="state"
            type="text"
            formControlName="state"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="zipCode" class="block text-sm font-medium text-gray-700">
            Zip Code
          </label>
          <input
            id="zipCode"
            type="text"
            formControlName="zipCode"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
      </div>
    </div>

    <div class="mb-8">
      <h2 class="text-xl font-semibold mb-4">Payment Information</h2>
      <div class="space-y-4">
        <div>
          <label
            for="cardNumber"
            class="block text-sm font-medium text-gray-700"
          >
            Card Number
          </label>
          <input
            id="cardNumber"
            type="text"
            formControlName="cardNumber"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label
              for="expiryDate"
              class="block text-sm font-medium text-gray-700"
            >
              Expiry Date
            </label>
            <input
              id="expiryDate"
              type="text"
              formControlName="expiryDate"
              placeholder="MM/YY"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
            />
          </div>
          <div>
            <label for="cvv" class="block text-sm font-medium text-gray-700">
              CVV
            </label>
            <input
              id="cvv"
              type="text"
              formControlName="cvv"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
            />
          </div>
        </div>
        <div>
          <label
            for="nameOnCard"
            class="block text-sm font-medium text-gray-700"
          >
            Name on Card
          </label>
          <input
            id="nameOnCard"
            type="text"
            formControlName="nameOnCard"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
      </div>
    </div>

    <button
      type="submit"
      [disabled]="!checkoutForm.valid"
      class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50"
    >
      Place Order (${{ cartTotal().toFixed(2) }})
    </button>
  </form>
</div>
