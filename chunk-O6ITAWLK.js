import{a as me}from"./chunk-3PHBWOYS.js";import{b as W,d as X,f as ee,g as te,h as ue,i as se}from"./chunk-6TJ5Y34S.js";import"./chunk-2LBAACNN.js";import{b as ie,c,e as ne,f as oe,i as le,j as re,k as ae,l as ce,n as de}from"./chunk-XOAENC4N.js";import"./chunk-OSRW7R4H.js";import{G as U,j as K,u as Q}from"./chunk-7O2Q7PLR.js";import{$b as r,Bb as m,Eb as A,Fa as B,Fb as Y,Ga as H,Gb as l,Hb as n,Ib as u,Pb as Z,Rb as p,ac as R,bc as h,cb as a,e as G,gc as J,mb as j,na as f,sb as d,ta as L,wb as $,yb as s}from"./chunk-2BSAHQW3.js";var fe=(i,o)=>o.id;function he(i,o){i&1&&(l(0,"p",12),r(1," First name is required "),n())}function ge(i,o){i&1&&(l(0,"p",15),r(1,"Last name is required"),n())}function Ce(i,o){i&1&&r(0," Email is required ")}function ve(i,o){i&1&&r(0," Please enter a valid email address ")}function _e(i,o){if(i&1&&(l(0,"p",12),d(1,Ce,1,0)(2,ve,1,0),n()),i&2){let e,t=p();a(),m(!((e=t.checkoutForm.get("email"))==null||e.errors==null)&&e.errors.required?1:!((e=t.checkoutForm.get("email"))==null||e.errors==null)&&e.errors.email?2:-1)}}function be(i,o){i&1&&(l(0,"p",12),r(1," Address is required "),n())}function xe(i,o){i&1&&(l(0,"p",12),r(1," City is required "),n())}function ke(i,o){i&1&&(l(0,"p",12),r(1," State is required "),n())}function ye(i,o){i&1&&r(0," ZIP code is required ")}function Fe(i,o){i&1&&r(0," Please enter a valid ZIP code ")}function Se(i,o){if(i&1&&(l(0,"p",12),d(1,ye,1,0)(2,Fe,1,0),n()),i&2){let e,t=p();a(),m(!((e=t.checkoutForm.get("zipCode"))==null||e.errors==null)&&e.errors.required?1:!((e=t.checkoutForm.get("zipCode"))==null||e.errors==null)&&e.errors.pattern?2:-1)}}function Ee(i,o){i&1&&r(0," Card number is required ")}function Ne(i,o){i&1&&r(0," Please enter a valid 16-digit card number ")}function we(i,o){if(i&1&&(l(0,"p",12),d(1,Ee,1,0)(2,Ne,1,0),n()),i&2){let e,t=p();a(),m(!((e=t.checkoutForm.get("cardNumber"))==null||e.errors==null)&&e.errors.required?1:!((e=t.checkoutForm.get("cardNumber"))==null||e.errors==null)&&e.errors.pattern?2:-1)}}function Te(i,o){i&1&&r(0," Expiry date is required ")}function Pe(i,o){i&1&&r(0," Please enter a valid expiry date (MM/YY) ")}function qe(i,o){if(i&1&&(l(0,"p",12),d(1,Te,1,0)(2,Pe,1,0),n()),i&2){let e,t=p();a(),m(!((e=t.checkoutForm.get("expiryDate"))==null||e.errors==null)&&e.errors.required?1:!((e=t.checkoutForm.get("expiryDate"))==null||e.errors==null)&&e.errors.pattern?2:-1)}}function ze(i,o){i&1&&r(0," CVV is required ")}function De(i,o){i&1&&r(0," Please enter a valid CVV ")}function Ve(i,o){if(i&1&&(l(0,"p",12),d(1,ze,1,0)(2,De,1,0),n()),i&2){let e,t=p();a(),m(!((e=t.checkoutForm.get("cvv"))==null||e.errors==null)&&e.errors.required?1:!((e=t.checkoutForm.get("cvv"))==null||e.errors==null)&&e.errors.pattern?2:-1)}}function Me(i,o){i&1&&(l(0,"p",12),r(1," Name on card is required "),n())}function Ie(i,o){i&1&&(B(),l(0,"svg",50),u(1,"circle",51)(2,"path",52),n(),H(),l(3,"span"),r(4,"Processing..."),n())}function Oe(i,o){i&1&&(B(),l(0,"svg",53),u(1,"path",54),n(),H(),l(2,"span"),r(3,"Place Order"),n())}function Be(i,o){if(i&1&&(l(0,"div",43)(1,"div",55)(2,"span",56),r(3),n(),l(4,"span",57),r(5),n()(),l(6,"span",56),r(7),n()()),i&2){let e=o.$implicit;a(3),h("",e.quantity,"x"),a(2),R(e.name),a(2),h("$",(e.price*e.quantity).toFixed(2),"")}}function He(i,o){if(i&1&&(l(0,"div",46)(1,"span"),r(2,"Discount"),n(),l(3,"span"),r(4),n()()),i&2){let e=p();a(4),h("-$",e.discount().toFixed(2),"")}}var pe=class i{constructor(){this.formBuilder=f(ce);this.cartService=f(me);this.router=f(Q);this.store=f(U);this.snackBar=f(ue);this.cartItems=this.store.selectSignal(W);this.subtotal=this.store.selectSignal(X);this.discount=this.store.selectSignal(ee);this.cartTotal=this.store.selectSignal(te);this.isSubmitting=j(!1);this.checkoutForm=this.formBuilder.group({firstName:["",[c.required,c.minLength(2)]],lastName:["",[c.required,c.minLength(2)]],email:["",[c.required,c.email]],address:["",[c.required,c.minLength(5)]],city:["",[c.required]],state:["",[c.required]],zipCode:["",[c.required,c.pattern(/^\d{5}(-\d{4})?$/)]],cardNumber:["",[c.required,c.pattern(/^\d{16}$/)]],expiryDate:["",[c.required,c.pattern(/^(0[1-9]|1[0-2])\/\d{2}$/)]],cvv:["",[c.required,c.pattern(/^\d{3,4}$/)]],nameOnCard:["",[c.required,c.minLength(3)]]}),this.checkoutForm.get("cardNumber")?.valueChanges.subscribe(o=>{if(o){let e=o.replace(/\D/g,"").slice(0,16);e!==o&&this.checkoutForm.patchValue({cardNumber:e},{emitEvent:!1})}}),this.checkoutForm.get("expiryDate")?.valueChanges.subscribe(o=>{if(o){let e=o.replace(/\D/g,"");e.length>=2&&(e=e.slice(0,2)+"/"+e.slice(2,4)),e!==o&&this.checkoutForm.patchValue({expiryDate:e},{emitEvent:!1})}}),this.checkoutForm.get("cvv")?.valueChanges.subscribe(o=>{if(o){let e=o.replace(/\D/g,"").slice(0,4);e!==o&&this.checkoutForm.patchValue({cvv:e},{emitEvent:!1})}}),this.checkoutForm.get("zipCode")?.valueChanges.subscribe(o=>{if(o){let e=o.replace(/[^\d-]/g,"");e.length>5&&!e.includes("-")&&(e=e.slice(0,5)+"-"+e.slice(5,9)),e!==o&&this.checkoutForm.patchValue({zipCode:e},{emitEvent:!1})}})}confirmOrder(){return G(this,null,function*(){if(this.checkoutForm.valid)try{this.isSubmitting.set(!0),yield new Promise(o=>setTimeout(o,2e3)),yield this.cartService.clearCart(),this.snackBar.open("Order placed successfully!","Close",{duration:5e3,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"}),yield this.router.navigate(["/confirmation"])}catch{this.snackBar.open("Failed to place order. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})}finally{this.isSubmitting.set(!1)}else Object.keys(this.checkoutForm.controls).forEach(o=>{this.checkoutForm.get(o)?.markAsTouched()}),this.snackBar.open("Please fill in all required fields correctly.","Close",{duration:5e3,panelClass:["error-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=L({type:i,selectors:[["app-checkout"]],standalone:!0,features:[J],decls:104,vars:39,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-bold","mb-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-white","p-6","rounded-lg","shadow-sm","space-y-4"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"space-y-1"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","formControlName","firstName",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["aria-live","polite",1,"text-red-500","text-sm","mt-1"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","name","lastName","formControlName","lastName",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],[1,"text-red-500","text-sm","mt-1"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","formControlName","email",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["for","address",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","address","formControlName","address",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["for","city",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","city","formControlName","city",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["for","state",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","state","formControlName","state",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["for","zipCode",1,"block","text-sm","font-medium","text-gray-700"],["type","text","inputmode","numeric","id","zipCode","formControlName","zipCode",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["for","cardNumber",1,"block","text-sm","font-medium","text-gray-700"],[1,"relative"],["type","text","inputmode","numeric","id","cardNumber","formControlName","cardNumber",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors","pl-10"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-gray-400","absolute","left-3","top-1/2","-translate-y-1/2"],["d","M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"],["fill-rule","evenodd","d","M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z","clip-rule","evenodd"],[1,"grid","grid-cols-2","gap-4"],["for","expiryDate",1,"block","text-sm","font-medium","text-gray-700"],["type","text","inputmode","numeric","id","expiryDate","formControlName","expiryDate","placeholder","MM/YY",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["for","cvv",1,"block","text-sm","font-medium","text-gray-700"],["type","text","inputmode","numeric","id","cvv","formControlName","cvv",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["for","nameOnCard",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","nameOnCard","formControlName","nameOnCard",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","px-6","rounded-lg","hover:bg-blue-700","transition-colors","duration-200","flex","items-center","justify-center","space-x-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"lg:col-span-1"],[1,"bg-white","p-6","rounded-lg","shadow-sm","space-y-4","sticky","top-4"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"border-t","pt-4","space-y-2"],[1,"flex","justify-between","text-gray-600"],[1,"flex","justify-between","text-green-600"],[1,"flex","justify-between","text-lg","font-semibold"],[1,"text-sm","text-gray-500","mt-4"],[1,"mt-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],[1,"flex","items-center","space-x-3"],[1,"text-gray-600"],[1,"text-gray-800"]],template:function(e,t){if(e&1&&(l(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Checkout"),n(),l(4,"div",3)(5,"div",4)(6,"form",5),Z("ngSubmit",function(){return t.confirmOrder()}),l(7,"div",6)(8,"h2",7),r(9,"Customer Information"),n(),l(10,"div",8)(11,"div",9)(12,"label",10),r(13," First Name "),n(),u(14,"input",11),d(15,he,2,0,"p",12),n(),l(16,"div",9)(17,"label",13),r(18," Last Name "),n(),u(19,"input",14),d(20,ge,2,0,"p",15),n()(),l(21,"div",9)(22,"label",16),r(23," Email "),n(),u(24,"input",17),d(25,_e,3,1,"p",12),n()(),l(26,"div",6)(27,"h2",7),r(28,"Shipping Information"),n(),l(29,"div",9)(30,"label",18),r(31," Address "),n(),u(32,"input",19),d(33,be,2,0,"p",12),n(),l(34,"div")(35,"label",20),r(36," City "),n(),u(37,"input",21),d(38,xe,2,0,"p",12),n(),l(39,"div",9)(40,"label",22),r(41," State "),n(),u(42,"input",23),d(43,ke,2,0,"p",12),n(),l(44,"div",9)(45,"label",24),r(46," ZIP Code "),n(),u(47,"input",25),d(48,Se,3,1,"p",12),n()(),l(49,"div",6)(50,"h2",7),r(51,"Payment Information"),n(),l(52,"div",9)(53,"label",26),r(54," Card Number "),n(),l(55,"div",27),u(56,"input",28),B(),l(57,"svg",29),u(58,"path",30)(59,"path",31),n()(),d(60,we,3,1,"p",12),n(),H(),l(61,"div",32)(62,"div",9)(63,"label",33),r(64," Experation Date "),n(),u(65,"input",34),d(66,qe,3,1,"p",12),n(),l(67,"div",9)(68,"label",35),r(69," CVV "),n(),u(70,"input",36),d(71,Ve,3,1,"p",12),n()(),l(72,"div",9)(73,"label",37),r(74," Name on Card "),n(),u(75,"input",38),d(76,Me,2,0,"p",12),n(),l(77,"button",39),d(78,Ie,5,0)(79,Oe,4,0),n()(),l(80,"div",40)(81,"div",41)(82,"h2",7),r(83,"Order Summary"),n(),l(84,"div",42),A(85,Be,8,3,"div",43,fe),n(),l(87,"div",44)(88,"div",45)(89,"span"),r(90,"Subtotal"),n(),l(91,"span"),r(92),n()(),d(93,He,5,1,"div",46),l(94,"div",47)(95,"span"),r(96,"Total"),n(),l(97,"span"),r(98),n()()(),l(99,"div",48)(100,"p"),r(101,"Shipping calculated at next step"),n(),l(102,"p",49),r(103," By placing your order, you agree to our Terms of Service and Privacy Policy "),n()()()()()()()()()),e&2){let g,C,v,_,b,x,k,y,F,S,E,N,w,T,P,q,z,D,V,M,I,O;a(6),$("formGroup",t.checkoutForm),a(8),s("border-red-500",((g=t.checkoutForm.get("firstName"))==null?null:g.invalid)&&((g=t.checkoutForm.get("firstName"))==null?null:g.touched)),a(),m((C=t.checkoutForm.get("firstName"))!=null&&C.invalid&&((C=t.checkoutForm.get("firstName"))!=null&&C.touched)?15:-1),a(4),s("border-red-500",((v=t.checkoutForm.get("lastName"))==null?null:v.invalid)&&((v=t.checkoutForm.get("lastName"))==null?null:v.touched)),a(),m((_=t.checkoutForm.get("lastName"))!=null&&_.invalid&&((_=t.checkoutForm.get("lastName"))!=null&&_.touched)?20:-1),a(4),s("border-red-500",((b=t.checkoutForm.get("email"))==null?null:b.invalid)&&((b=t.checkoutForm.get("email"))==null?null:b.touched)),a(),m((x=t.checkoutForm.get("email"))!=null&&x.invalid&&((x=t.checkoutForm.get("email"))!=null&&x.touched)?25:-1),a(7),s("border-red-500",((k=t.checkoutForm.get("address"))==null?null:k.invalid)&&((k=t.checkoutForm.get("address"))==null?null:k.touched)),a(),m((y=t.checkoutForm.get("address"))!=null&&y.invalid&&((y=t.checkoutForm.get("address"))!=null&&y.touched)?33:-1),a(4),s("border-red-500",((F=t.checkoutForm.get("city"))==null?null:F.invalid)&&((F=t.checkoutForm.get("city"))==null?null:F.touched)),a(),m((S=t.checkoutForm.get("city"))!=null&&S.invalid&&((S=t.checkoutForm.get("city"))!=null&&S.touched)?38:-1),a(4),s("border-red-500",((E=t.checkoutForm.get("state"))==null?null:E.invalid)&&((E=t.checkoutForm.get("state"))==null?null:E.touched)),a(),m((N=t.checkoutForm.get("state"))!=null&&N.invalid&&((N=t.checkoutForm.get("state"))!=null&&N.touched)?43:-1),a(4),s("border-red-500",((w=t.checkoutForm.get("zipCode"))==null?null:w.invalid)&&((w=t.checkoutForm.get("zipCode"))==null?null:w.touched)),a(),m((T=t.checkoutForm.get("zipCode"))!=null&&T.invalid&&((T=t.checkoutForm.get("zipCode"))!=null&&T.touched)?48:-1),a(8),s("border-red-500",((P=t.checkoutForm.get("cardNumber"))==null?null:P.invalid)&&((P=t.checkoutForm.get("cardNumber"))==null?null:P.touched)),a(4),m((q=t.checkoutForm.get("cardNumber"))!=null&&q.invalid&&((q=t.checkoutForm.get("cardNumber"))!=null&&q.touched)?60:-1),a(5),s("border-red-500",((z=t.checkoutForm.get("expiryDate"))==null?null:z.invalid)&&((z=t.checkoutForm.get("expiryDate"))==null?null:z.touched)),a(),m((D=t.checkoutForm.get("expiryDate"))!=null&&D.invalid&&((D=t.checkoutForm.get("expiryDate"))!=null&&D.touched)?66:-1),a(4),s("border-red-500",((V=t.checkoutForm.get("cvv"))==null?null:V.invalid)&&((V=t.checkoutForm.get("cvv"))==null?null:V.touched)),a(),m((M=t.checkoutForm.get("cvv"))!=null&&M.invalid&&((M=t.checkoutForm.get("cvv"))!=null&&M.touched)?71:-1),a(4),s("border-red-500",((I=t.checkoutForm.get("nameOnCard"))==null?null:I.invalid)&&((I=t.checkoutForm.get("nameOnCard"))==null?null:I.touched)),a(),m((O=t.checkoutForm.get("nameOnCard"))!=null&&O.invalid&&((O=t.checkoutForm.get("nameOnCard"))!=null&&O.touched)?76:-1),a(),$("disabled",t.checkoutForm.invalid||t.isSubmitting()),a(),m(t.isSubmitting()?78:79),a(7),Y(t.cartItems()),a(7),h("$",t.subtotal().toFixed(2),""),a(),m(t.discount()>0?93:-1),a(5),h("$",t.cartTotal().toFixed(2),"")}},dependencies:[K,de,le,ie,ne,oe,re,ae,se],encapsulation:2})}};export{pe as CheckoutComponent};
