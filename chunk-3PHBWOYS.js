import{b as c}from"./chunk-6TJ5Y34S.js";import{a as n,b as p,e,f as d}from"./chunk-OSRW7R4H.js";import{G as m}from"./chunk-7O2Q7PLR.js";import{ha as i,na as s}from"./chunk-2BSAHQW3.js";var u=class o{constructor(){this.store=s(m)}loadCart(){let t=localStorage.getItem("shopping_cart");if(t)try{let r=JSON.parse(t),l=Object.entries(r.items).map(([C,a])=>({id:Number(C),name:a.product.title,price:a.product.price,quantity:a.quantity}));this.store.dispatch(e({items:l}))}catch{this.store.dispatch(e({items:[]}))}else this.store.dispatch(e({items:[]}))}getCartItems(){return this.store.select(c)}addToCart(t){this.store.dispatch(n({product:t}))}removeFromCart(t){this.store.dispatch(p({id:t}))}updateQuantity(t,r){r===0&&this.removeFromCart(t)}clearCart(){return this.store.dispatch(d()),Promise.resolve()}saveCart(t){localStorage.setItem("shopping_cart",JSON.stringify(t))}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})}};export{u as a};
